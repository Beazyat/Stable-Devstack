## What is devstack
این ابزار محیطی برای تست و توسعه سریع‌تر **Openstack** بود و برای همین هدف نیز ساخته شد و به‌عنوان نقطه شروع، کاربران را قادر به آشنایی و کار و یادگیری با این پروژه بزرگ می‌سازد.
این ابزار مجموعه‌ای از اسکریپت‌های Bash است که هدف از آن‌ها ایجاد محیطی برای پیکربندی و پیاده‌سازی Openstack است. سورس‌کد‌های آن برای انسان قابل قابل خواندن و درک است؛ از این رو می‌توان با کمی عمیق‌تر شدن از روند کار و نیازمندی‌های هر جزء و نحوه پیکربندی و بخصوص روش کار سیستم آگاه شد.
در این آموزش قرار است همه کامپوننت‌ها روی یک ماشین‌مجازی یا سیستم قرار داده شوند و نباید این نکته را فراموش کرد این این ابزار برای محیط‌های پروداکشن و اجرایی نیست و فقط برای تست و آشنایی قابل استفاده است.
در این آموزش شما با گزینه‌های پیکربندی و کامپوننت‌های Openstack آشنا خواهید شد و نحوه کار به‌صورت ابتدایی را با آن خواهید آموخت.
## Using Openstack by deploying Devstack
==*نکته:* پیش از همه چیز باید بدانید که در روند نصب و راه‌اندازی **Devstack**، شاید بالا آمدن آن جذاب و دل‌چسب باشد اما روند راه‌اندازی آن می‌تواند همراه با خطا‌های بسیار یا آزاردهنده باشد. از این رو ماشین‌های مجازی از پیش آماده نیز هستند که می‌توانید آن‌ها را دانلود و روی ابزار‌های مدیریت ماشین‌ مجازی خود قرار دهید و استفاده نمایید.== 
### Creating the server
برای نصب بطور کلی دو روش معمول دارید، خود یک توزیع لینوکسی روی سیستم خود نصب نمایید و سپس بر روی آن **Devstack** را نصب نمایید و در روش دیگر آن را بر روی یک ماشین مجازی ایجاد نمایید.
[مناسب‌ترین توزیع‌ها برای نصب این ابزار](https://docs.openstack.org/devstack/latest/?utm_source=chatgpt.com#:~:text=Quick%20Start-,install%20linux,-Start%20with%20a)، اخرین نسخه‌ها با پشتیبانی طولانی‌مدت توزیع‌های Ubuntu، Rocky Linux 9 و Openeuler است و نسخه پیشنهادی اصلی خود Devstack، نسخه Ubuntu 22.04 (Jammy) است.
در ضمن پیشنهاد می‌شود ترجیحا نسخه **3.10** زبان برنامه نویسی **پایتون** را نصب نمایید. به علت پایداری نسبتا مناسب این نسخه، برای پیاده سازی این ابزار مناسب‌ترین گزینه است. برای آموزش نصب و تنظیمات مربوط به آن [روش نصب پایتون ۳.۱۰](obsidian://open?vault=Obsidian&file=Openstack%2Fassets%2F%D9%86%D8%B5%D8%A8%20%D9%BE%D8%A7%DB%8C%D8%AA%D9%88%D9%86%20%DB%B3.%DB%B1%DB%B0%20%D8%B1%D9%88%DB%8C%20%D9%84%DB%8C%D9%86%D9%88%DA%A9%D8%B3) را دنبال نمایید.
بطور کلی روش پیشنهادی اما نصب بر روی ماشین‌مجازی است، زیرا این ابزار مداوم در حال بروزرسانی است و امکان بروز مشکلاتی در آن همواره وجود دارد.
### Preparing the server environment
#### What is Stacking
 به عمل استقرار **Devstack** فرای این‌که با چه روشی انجام شود را  **stacking** می‌گویند. فرآیند stacking عمل فراخوانی و پیکربندی را شامل می‌شود که در آن پکیج‌های مورد نیاز را از مخازن آنلاین دانلود و آماده‌سازی می‌نماید.
#### Create stack User
  در گام بعد نیاز به یک ایجاد یک کاربر داریم که بتواند از دستور محدود **sudo** استفاده نماید. خود Devstack نیز پیشنهاد می‌کند تا به جای استفاده از کاربر **Root** از این روش استفاده کرده و حتی در صورت اجرا با کاربر روت ارور می‌دهد و از شما می‌خواهد کاربر دیگری با دسترسی sudo ایجاد نمایید. 
  برای انجام این کار ابتدا کاربر مورد نظر را به همراه دایرکتوری مبدا یا خانه و همین طور Shell مورد نظر ایجاد می‌کنیم.
```bash
sudo useradd -s /bin/bash -d /opt/stack -m stack
```
سپس برای دادن دسترسی اجرایی به اسکریپت‌های این دایرکتوری دستور زیر را وارد نمایید.
```bash
sudo chmod +x /opt/stack
```
حال برای دادن محدوده دسترسی Sudo به این یوزر دستور زیر را وارد نمایید.
```bash
echo "stack ALL=(ALL) NOPASSWD: ALL" | sudo tee /etc/sudoers.d/stack
```
و در مرحله آخر نیز به کاربر خود را به کاربر stack تغییر دهید:
```bash
sudo -u stack -i
```
#### Up-to-date Packages
در گام بعد نیاز داریم که پکیج‌های موجود در توزیع‌ نصب شده بروز شوند تا در روند کار و نصب خود سیستم‌عامل یا Devstack مشکلی ایجاد نشود.
با دستور ( فرض بر این که توزیع نصب شده شما Ubuntu است):
```bash
sudo apt-get -u update && sudo apt-get upgrade
```
این فرآیند انجام می‌شود و می‌تواند بین ۱۰ تا ۱۵ دقیقه نیز بسته به سرعت ایترنت زمانبر باشد.
#### Install Git
در گام بعد نیاز است تا برای فراخوانی سورس‌های Devstack از مخزن آن، **Git** را نصب نمایید.
```bash
sudo apt-get -y install git
```
### Configure and Install Devstack
در این مرحله باید سورس‌کد‌های [Devstack](https://github.com/openstack/devstack) را با استفاده از دستور زیر فراخوانی نمایید.
```bash
sudo git clone https://github.com/openstack-dev/devstack.git
```
**نکته:** در این روش همواره branch یا شاخه اصلی فراخوانی می‌شود. اما شما می‌توانید در صفحه گیت‌هاب برنچ‌های پایدارتر که در نام آن‌ها از کلمه **Stable** استفاده شده است را پیدا کرده و دستور قبل را بدین صورت وارد نمایید:
```bash
git clone -b branch_name https://github.com/openstack-dev/devstack.git
```
![[Screenshot 2025-07-01 200718.png| نحوه مشاهده و یافتن شاخه‌های پایدار]]
پس از این مرحله نیز وارد دایرکتوری **devstack** می‌شویم.
```bash
cd devstack
```
#### Configure Devstack
در این مرحله ابتدا با دستور زیر فایل **local.conf** را ایجاد نمایید:
```bash
touch local.conf
```
این فایل قرار است به ما امکان پیکربندی نحوه استقرار **Devstack** را می‌دهد؛ بطوریکه در آن می‌توانیم گذرواژه سرویس‌ها، فعال یا غیرفعال بودن آن‌ها و ... را تعیین نماییم.
سپس با دستور زیر برای ادیت آن اقدام می‌کنیم:
```bash
sudo nano local.conf
```
و سپس محتویات [[local.conf]] ضمیمه شده را در فایل جای‌گذاری می‌کنیم.
**نکته۱:** هم‌چنین می‌توانید برنامه را با تکست ادیتور‌های دیگر یا حتی خود vscode باز نموده و تغییرات را مانند تصویر زیر ایجاد نمایید. 
**نکته۲:** پسورد‌ها را می‌توانید بسته به میل خود تغییر دهید. در این روش پسورد پیش‌فرض **devstack** است.
#### Install Devstack
حال در همان دایرکتوری برای‌ آخرین اقدام در مرحله نصب و آماده‌سازی Devstack دستور زیر را وارد نمایید تا روند پیکربندی و نصب آن آغاز شود. این مرحله بسته به سرعت اینترنت می‌تواند ۲۰ دقیقه تا ۴۵ دقیقه زمان‌بر باشد.
```bash
./stack.sh
```
#### How to access webclient
در پایان اجرای این اسکریپت IP صفحه وب مورد نظر برای دسترسی و کار با رابط گرافیکی Devstack داده می‌شود اما برای دسترسی به آن می‌توانید IP سیستم خود را وارد نمایید یا این که اگر IP دیگری را در فایل local.conf مشخص کرده‌اید، آن را در مرورگر خود وارد نمایید.